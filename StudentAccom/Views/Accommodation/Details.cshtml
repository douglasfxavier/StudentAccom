@{
    StudentAccom.Models.Accommodation accom = (StudentAccom.Models.Accommodation)ViewData["accom"];
    string currentUserId = (string)ViewData["currentUserId"];
    string landlordFullName = (string)ViewData["landlordFullName"];
    string landlordCompany = (string)ViewData["landlordCompany"];
    string landlordEmail = (string)ViewData["landlordEmail"];
    string landlordPhoneNumber = (string)ViewData["landlordPhoneNumber"];
    ViewBag.Title = "Details of Accommodation Advertisement";
}

<!DOCTYPE html>

<html>
<head>
    <title>Details</title>
</head>

<body>
    <section title="Accommodation details" class="col-md-12">
         <div class="col-md-7">
            <h1><strong>@accom.Title</strong></h1>
            @if (Request.IsAuthenticated && User.IsInRole("Landlord") && currentUserId.Equals(accom.LandlordID)) {
                <div>
                    <span>@Html.ActionLink("Edit", "Edit", new { id = accom.ID })</span>
                    <span> | </span>
                    <span>@Html.ActionLink("Delete", "Delete", new { id = accom.ID })</span>
                </div>
            }
             <div class="body-margin" title="Basic information about the accommodation">
                 <h2>Landlord information</h2>
                 <br />
                 <p><span class="field-name">Name: </span>@landlordFullName</p>
                 @if (landlordCompany != null && landlordCompany != "") {
                     <p><span class="field-name">Company: </span> @landlordCompany</p>
                 }
                 <p><span class="field-name">Email: </span>@landlordEmail</p>
                 @if (landlordPhoneNumber != null && landlordPhoneNumber != "") {
                     <p><span class="field-name">Phone Number: </span>@landlordPhoneNumber</p>
                 }
             </div>
            <div class="topic-margin" title="Accommodation details">
                <h2>Accommodation details</h2>
                <br />
                <p><span class="field-name">Type of accommodation: </span>@accom.TypeAccom</p>
                <p><span class="field-name">Description: </span>@accom.Description</p>
                <p><span class="field-name">Location: </span>@accom.Location</p>
                <p><span class="field-name">Price: </span>@accom.Price</p>
                <p><span class="field-name">Type of rent: </span>@accom.TypeRent</p>
                <p><span class="field-name">Cleaning fee: </span>@accom.CleaningFee</p>
                <p><span class="field-name">Security deposit: </span>@accom.SecurityDeposit</p>                
            </div>

            <div class="topic-margin" title="Additional features in the accommodation">
                <h2>Additional features</h2>
                @if (@accom.Internet) {
                    <p class="col-md-4"><span><img src="~/Images/internet-icon.png" alt="Internet icon" />   Internet</span></p>
                }
                @if (@accom.Wifi) {
                    <p class="col-md-4"><span><img src="~/Images/wifi-icon.png" alt="Wi-fi icon" />   Wi-fi</span></p>
                }
                @if (@accom.CableTV) {
                    <p class="col-md-4"><span><img src="~/Images/cable-tv-icon.png" alt="Cable TV icon" />   Cable TV</span></p>
                }
                @if (@accom.TV) {
                    <p class="col-md-4"><span><img src="~/Images/tv-icon.png" alt="TV icon" />   TV</span></p>
                }
                @if (@accom.Doorman) {
                    <p class="col-md-4"><span><img src="~/Images/doorman-icon.png" alt="Doorman icon" />   Doorman</span></p>
                }
                @if (@accom.Kitchen) {
                    <p class="col-md-4"><span><img src="~/Images/kitchen-icon.png" alt="Kitchen icon" />   Kitchen</span></p>
                }
                @if (@accom.IndividualBathroom) {
                    <p class="col-md-4"><span><img src="~/Images/bathroom-icon.png" alt="Bathroom icon" />   Individual bathroom</span></p>
                }
                @if (@accom.SharedBathroom) {
                    <p class="col-md-4"><span><img src="~/Images/bathroom-icon.png" alt="Bathroom icon" />   Shared bathroom</span></p>
                }
                @if (@accom.Heating) {
                    <p class="col-md-4"><span><img src="~/Images/heating-icon.png" alt="Heating icon" />   Heating</span></p>
                }
                @if (@accom.AirConditioning) {
                    <p class="col-md-4"><span><img src="~/Images/air-conditioning-icon.png" alt="Air-conditioning icon" />   Air-conditioning</span></p>
                }
                @if (@accom.WashingMachine) {
                    <p class="col-md-4"><span><img src="~/Images/washing-machine-icon.png" alt="Washing machine icon" />   Washing machine</span></p>
                }
                @if (@accom.DryingMachine) {
                    <p class="col-md-4"><span><img src="~/Images/drying-machine-icon.png" alt="Drying machine icon" />   Drying machine</span></p>
                }
                @if (@accom.Pool) {
                    <p class="col-md-4"><span><img src="~/Images/pool-icon.png" alt="Pool icon" />   Pool</span></p>
                }
                @if (@accom.Gym) {
                    <p class="col-md-4"><span><img src="~/Images/gym-icon.png" alt="Gym icon" />   Gym</span></p>
                }
            </div>
            @if (Request.IsAuthenticated && User.IsInRole("AccommodationOfficer") && accom.Status == StudentAccom.Models.Status.UnderReview) {
                <div title="Accommodation Officer Review" class="generic-margin">
                    <h1 class="review">Accommodation Office Review</h1>
                    <form action="../../Accommodation/Review" method="post">
                        <div>
                            <input hidden name="Accommodation_ID" value="@accom.ID" />
                            <textarea class="form-control vresize" name="textAreaComment" id="textAreaComment" style="resize:none;" rows="10" placeholder="Advertisement Review"></textarea>
                            <br />
                            <input name="btnReview" class="btn btn-danger" type="submit" value="Reject" />
                            <input name="btnReview" class="btn btn-success" type="submit" value="Approve" />
                        </div>
                    </form>                    
                </div>
            } else if (Request.IsAuthenticated && User.IsInRole("AccommodationOfficer") && accom.Status != StudentAccom.Models.Status.UnderReview) {
                <div title="Accommodation Officer Review" class="generic-margin">
                    <h1 class="review">Accommodation Office Review</h1>
                    <p><b>Status: </b>@accom.Status</p>
                    @if (accom.Comment != null && accom.Comment != ""){
                        <b>Comment: </b>
                        <p>@accom.Comment</p>
                    } else {
                        <p>The officer has not written a comment for this advertisement.</p>
                    }

                </div>
             }
        </div>

        <div class="body-margin col-md-5" title="Images">
            @if (accom.Images.Count > 1) {
                <div id="details-carousel" class="carousel slide" data-ride="carousel">
     <!--
                    <ol class="carousel-indicators">
                        @for (int i = 0; i < accom.Images.Count; i++) {
                            if (i == 0) {
                                <li data-target="#details-carousel" data-slide-to="i" class="active"></li>
                            } else {
                                <li data-target="#details-carousel" data-slide-to="i"></li>
                            }
                        }
                    </ol> 
    -->                
                    <div class="carousel-inner" role="listbox">
                        @foreach (var img in accom.Images) {
                            if (accom.Images.First() == img) {
                                <div class="item active">
                                    <img src="data:@img.MimeType;base64, @Convert.ToBase64String(img.ImageData)" />
                                </div>
                            } else {
                                <disv class="item">
                                    <img src="data:@img.MimeType;base64, @Convert.ToBase64String(img.ImageData)" />
                                </disv>
                            }
                        }
                    </div>
                    <a class="left carousel-control" href="#details-carousel" role="button" data-slide="prev">
                        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> 
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="right carousel-control" href="#details-carousel" role="button" data-slide="next">
                        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            } else if (accom.Images.Count == 1) {
                var img = accom.Images.First();
                <div class="">
                    <img src="data:@img.MimeType;base64, @Convert.ToBase64String(img.ImageData)" />
                </div>
            } else {
                <div class="">
                    <img src="~/Images/no-image.png" alt="No image" />
                </div>
            }
        </div>
    </section>
</body>
</html>
